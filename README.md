# Instagram インスタントウィンキャンペーンツール\n\nInstagramインスタントウィンキャンペーンの管理・運用を効率化するWebアプリケーションです。\n\n## 🚀 プロジェクト概要\n\n本ツールは、Instagramでのインスタントウィンキャンペーンを簡単に作成・管理・分析できるCRMシステムです。\n\n### 主な機能\n\n- 📊 **ダッシュボード**: キャンペーンの概要と統計情報\n- 🎯 **キャンペーン管理**: キャンペーンのCRUD操作\n- 🎁 **プライズ管理**: 景品・当選確率の設定\n- 🔄 **フローエディタ**: 会話フローの視覚的編集\n- 💬 **会話管理**: リアルタイムチャット機能\n- 🎰 **抽選システム**: 確率制御付き抽選機能\n\n## 🛠 技術スタック\n\n### バックエンド\n- **Framework**: Express.js (Node.js)\n- **Language**: TypeScript\n- **Database**: MySQL\n- **ORM**: Sequelize\n- **Authentication**: JWT\n- **Real-time**: Socket.io\n- **Validation**: Joi\n- **Logging**: Winston\n\n### フロントエンド\n- **Framework**: Vue 3 (Composition API)\n- **Language**: TypeScript\n- **Build Tool**: Vite\n- **State Management**: Pinia\n- **Routing**: Vue Router\n- **UI Library**: Tailwind CSS + Headless UI\n- **HTTP Client**: Axios\n- **Testing**: Vitest + Vue Testing Library\n\n## 📋 前提条件\n\n- Node.js 18.0.0 以上\n- MySQL 8.0 以上\n- npm または yarn\n\n## 🚀 セットアップ手順\n\n### 1. リポジトリのクローン\n\n```bash\ngit clone <repository-url>\ncd chatbot\n```\n\n### 2. 依存関係のインストール\n\n```bash\n# ルートディレクトリで全ての依存関係をインストール\nyarn install\n\n# または個別にインストール\ncd backend && yarn install\ncd ../frontend && yarn install\n```\n\n### 3. データベース設定\n\n#### MySQL データベースの作成\n\n```sql\nCREATE DATABASE instagram_crm_dev CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE DATABASE instagram_crm_test CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n```\n\n#### 環境変数の設定\n\nバックエンドの環境変数を設定します：\n\n```bash\ncp backend/.env.example backend/.env\n```\n\n`.env` ファイルを編集してデータベース接続情報を設定してください：\n\n```env\n# Database Configuration\nDB_HOST=127.0.0.1\nDB_PORT=3306\nDB_NAME=instagram_crm_dev\nDB_NAME_TEST=instagram_crm_test\nDB_USERNAME=root\nDB_PASSWORD=your_password\n\n# JWT Configuration\nJWT_SECRET=your-super-secret-jwt-key-here\n```\n\n### 4. データベースマイグレーション\n\n```bash\ncd backend\n\n# マイグレーションの実行\nyarn db:migrate\n\n# シードデータの投入（オプション）\nyarn db:seed\n```\n\n### 5. アプリケーションの起動\n\n#### 開発モード（推奨）\n\n```bash\n# ルートディレクトリから両方を同時起動\nyarn dev\n\n# または個別に起動\n# ターミナル1: バックエンド\ncd backend && yarn dev\n\n# ターミナル2: フロントエンド\ncd frontend && yarn dev\n```\n\n#### 本番モード\n\n```bash\n# フロントエンドのビルド\ncd frontend && yarn build\n\n# バックエンドのビルドと起動\ncd backend && yarn build && yarn start\n```\n\n### 6. アクセス確認\n\n- **フロントエンド**: http://localhost:5173\n- **バックエンドAPI**: http://localhost:3001\n- **ヘルスチェック**: http://localhost:3001/health\n\n## 📁 プロジェクト構成\n\n```\nchatbot/\n├── backend/                 # バックエンドアプリケーション\n│   ├── src/\n│   │   └── server/\n│   │       ├── api/         # APIエンドポイント\n│   │       ├── middleware/  # ミドルウェア\n│   │       ├── services/    # ビジネスロジック\n│   │       └── utils/       # ユーティリティ\n│   ├── database/\n│   │   ├── models/          # Sequelizeモデル\n│   │   ├── migrations/      # マイグレーション\n│   │   └── seeders/         # シードデータ\n│   └── tests/               # テスト\n├── frontend/                # フロントエンドアプリケーション\n│   ├── src/\n│   │   ├── components/      # Vueコンポーネント\n│   │   ├── pages/           # ページコンポーネント\n│   │   ├── layouts/         # レイアウト\n│   │   ├── stores/          # Pinia状態管理\n│   │   ├── services/        # API通信\n│   │   └── utils/           # ユーティリティ\n│   └── tests/               # テスト\n├── docs/                    # 設計書・ドキュメント\n└── package.json             # ワークスペース設定\n```\n\n## 🧪 テスト\n\n### バックエンドテスト\n\n```bash\ncd backend\n\n# 全テスト実行\nyarn test\n\n# ウォッチモード\nyarn test:watch\n```\n\n### フロントエンドテスト\n\n```bash\ncd frontend\n\n# 全テスト実行\nyarn test\n\n# UIモード\nyarn test:ui\n\n# カバレッジ計測\nyarn test:coverage\n```\n\n## 📊 データベース操作\n\n### 基本的なコマンド\n\n```bash\ncd backend\n\n# マイグレーション実行\nyarn db:migrate\n\n# シードデータ投入\nyarn db:seed\n\n# データベースリセット（開発時）\nyarn db:reset\n```\n\n### マイグレーション作成\n\n```bash\ncd backend\nnpx sequelize-cli migration:generate --name create-new-table\n```\n\n## 🛠 開発ガイドライン\n\n### コーディング規約\n\n- **TypeScript**: 厳格な型チェックを有効化\n- **ESLint + Prettier**: コード品質と整形の統一\n- **命名規則**: \n  - ファイル: kebab-case または PascalCase（コンポーネント）\n  - 変数・関数: camelCase\n  - 定数: UPPER_SNAKE_CASE\n  - データベース: snake_case\n\n### Git フロー\n\n1. 機能ブランチを作成\n2. 実装・テスト\n3. コミット（規約に従う）\n4. プルリクエスト作成\n5. レビュー・マージ\n\n### コミットメッセージ規約\n\n```\n<type>: <description>\n\ntype:\n- feat: 新機能\n- fix: バグ修正\n- docs: ドキュメント\n- style: スタイル変更\n- refactor: リファクタリング\n- test: テスト追加・修正\n- chore: その他\n```\n\n## 🚀 デプロイ\n\n### 本番環境へのデプロイ手順\n\n1. **環境変数の設定**\n```bash\nexport NODE_ENV=production\nexport DB_HOST=production-db-host\nexport DB_PASSWORD=production-password\n```\n\n2. **データベースマイグレーション**\n```bash\ncd backend && yarn db:migrate\n```\n\n3. **アプリケーションのビルド**\n```bash\ncd frontend && yarn build\ncd ../backend && yarn build\n```\n\n4. **サーバー起動**\n```bash\ncd backend && yarn start\n```\n\n### Docker を使用したデプロイ\n\n```bash\n# Docker イメージのビルド\ndocker-compose build\n\n# アプリケーションの起動\ndocker-compose up -d\n```\n\n## 📚 API ドキュメント\n\n### 主要エンドポイント\n\n- `GET /api/health` - ヘルスチェック\n- `GET /api/campaigns` - キャンペーン一覧\n- `POST /api/campaigns` - キャンペーン作成\n- `GET /api/campaigns/:id` - キャンペーン詳細\n- `PUT /api/campaigns/:id` - キャンペーン更新\n- `DELETE /api/campaigns/:id` - キャンペーン削除\n\n詳細なAPI仕様書は `docs/api/` ディレクトリを参照してください。\n\n## 🔧 トラブルシューティング\n\n### よくある問題\n\n#### データベース接続エラー\n```\nError: connect ECONNREFUSED 127.0.0.1:3306\n```\n**解決方法**: MySQLサーバーが起動していることを確認し、接続情報を再確認してください。\n\n#### ポート競合エラー\n```\nError: listen EADDRINUSE :::3001\n```\n**解決方法**: 他のプロセスがポートを使用していないか確認し、必要に応じて別のポートを使用してください。\n\n#### Node.js バージョンエラー\n**解決方法**: Node.js 18.0.0以上をインストールしてください。\n\n## 📝 ライセンス\n\nMIT License\n\n## 👥 コントリビューション\n\n1. このリポジトリをフォーク\n2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)\n3. 変更をコミット (`git commit -m 'feat: add amazing feature'`)\n4. ブランチにプッシュ (`git push origin feature/amazing-feature`)\n5. プルリクエストを作成\n\n## 📞 サポート\n\n問題や質問がある場合は、以下の方法でお問い合わせください：\n\n- GitHub Issues でバグ報告や機能要望\n- プルリクエストでコード改善の提案\n\n---\n\n**開発チーム** | Instagram CRM プロジェクト